# Start from a minimal Linux distribution
FROM alpine:latest

# Install R
RUN apk --no-cache add R

# Install necessary R packages
COPY packagelist.txt .
RUN while read in; do R -e "install.packages('$in')"; done < packagelist.txt

# Copy R scripts into the container
COPY RCode/ /RCode/

# Set up a CRON job
RUN echo '30 */1 * * * Rscript /RCode/update_all.R' > /etc/crontabs/root

# The command that starts the cron service
CMD ["crond", "-f", "-l", "8"]
